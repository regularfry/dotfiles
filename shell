# -*- mode: sh -*-
export LC_CTYPE=en_GB.UTF-8
export LANG=en_GB.UTF-8

alias screen='echo $SSH_AUTH_SOCK > ~/.ssh_auth_sock && screen'
alias sync_ssh='export SSH_AUTH_SOCK=`cat ~/.ssh_auth_sock`'
alias rtest="ruby -I.:lib:test:tests/unit -rpp -rubygems"
alias trails="ruby -I.:lib:test -rpp -rubygems"
alias openvpn="sudo /etc/init.d/openvpn"
alias be="bundle exec"
alias ebe="env/bin/exec"
#alias +x="chmod +x"
alias e="emacsclient -n"

mcd () {
  dirname=$1
  if [ -z "${dirname}" ]; then
    echo "Need a dirname" >&2
  else
    mkdir -p $dirname
    cd $dirname
  fi
}

gcd (){
  cd $(git rev-parse --show-toplevel)/$1
}
cdp (){
  cd ~/projects/help/$1
}
vg (){
  proj=$1
  if [ -z "$proj" ]; then
    shift
    vagrant up; vagrant ssh
  else
    if [ -z "$2" ]; then
      cdp $proj && (vagrant up; vagrant ssh)
    else
      cdp $proj && (vagrant up; vagrant ssh -c "$*")
    fi
  fi
}


export EDITOR=vim

export CHICKEN_BIN=$HOME/.chicken/bin
export CABAL_BIN=$HOME/.cabal/bin

if [ -e $SSH_AUTH_SOCK ]; then
  if ! ssh-add -L > /dev/null; then
    ssh-add
  fi
fi
if [ -z "${GOPATH}" ]; then
  export GOPATH=$HOME/go
fi
export GOPATHS=$GOPATH/bin
export PATH=/usr/local/bin:$PATH
export PATH=$CHICKEN_BIN:$HOME/bin:$GOPATHS:$CABAL_BIN:$PATH
export PATH=$PATH:/Applications/Postgres.app/Contents/Versions/latest/bin
export PATH=$PATH:$HOME/.yarn/bin
export DEBEMAIL=alex@blackkettle.org
export DEBFULLNAME="Alex Young"
export GITHUB_USERNAME=regularfry
#export GITHUB_ADMIN_OAUTH="615ae7812851c24d5ffb4e79d16bbbbfafda4e0b"
# This is the `Sky repo only` key
export GITHUB_ADMIN_OAUTH="b6b618584e46025d3d9305f08a6fcb7b747ed7c6"
export GITHUB_STATS_OAUTH="d24ac8fd92536b8f8fd5f092a5a37b0959c4098e"
# export PRIVATE_GEM_OAUTH="7b16c8d5113d1d7257c4292b0c34090f409b6f01"
export PRIVATE_GEM_OAUTH=$GITHUB_ADMIN_OAUTH

cf-dev (){
  export CF_HOME=~/.cf/dev
  cf api api.cf.dev-paas.bskyb.com --skip-ssl-validation
  cf login
}

cf-stage (){
  export CF_HOME=~/.cf/stage
  cf api api.cf.stage-paas.bskyb.com --skip-ssl-validation
  cf login
}

cf-prod () {
  export CF_HOME=~/.cf/prod
  cf api api.cf.paas.bskyb.com --skip-ssl-validation
  cf login
}

#cf-prod


# OPAM configuration
. /home/zander/.opam/opam-init/init.sh > /dev/null 2> /dev/null || true

# NVM config
export NVM_DIR=~/.nvm
nvm() {
  source $(brew --prefix nvm)/nvm.sh
  nvm $@
}

export PATH=$PATH:node_modules/.bin
if [ -f /usr/local/share/chruby/chruby.sh ]; then
  source /usr/local/share/chruby/chruby.sh
fi
