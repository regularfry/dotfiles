# -*- mode: sh -*-
export LC_CTYPE=en_GB.UTF-8
export LANG=en_GB.UTF-8

alias screen='echo $SSH_AUTH_SOCK > ~/.ssh_auth_sock && screen'
alias sync_ssh='export SSH_AUTH_SOCK=`cat ~/.ssh_auth_sock`'
alias rtest="ruby -I.:lib:test:tests/unit -rpp -rubygems"
alias trails="ruby -I.:lib:test -rpp -rubygems"
alias openvpn="sudo /etc/init.d/openvpn"
alias be="bundle exec"
alias ebe="env/bin/exec"
alias +x="chmod +x"
alias e="emacsclient -n"

mcd () {
  dirname=$1
  if [ -z "${dirname}" ]; then
    echo "Need a dirname" >&2
  else
    mkdir -p $dirname
    cd $dirname
  fi
}

gcd (){
  cd $(git rev-parse --show-toplevel)/$1
}
cdp (){
  cd ~/projects/help/$1
}
vg (){
  proj=$1
  shift
  if [ -z "$proj" ]; then
    vagrant ssh
  else
    if [ -z "$2" ]; then
      cdp $proj && vagrant ssh
    else
      cdp $proj && vagrant ssh -c "$*"
    fi
  fi
}


export EDITOR=vim

export CHICKEN_BIN=$HOME/.chicken/bin
export CABAL_BIN=$HOME/.cabal/bin

if [ -e $SSH_AUTH_SOCK ]; then
  if ! ssh-add -L > /dev/null; then
    ssh-add
  fi
fi

if [ -z "${GOPATH}" ]; then
  export GOPATH=$HOME/go
fi
export GOPATHS=$GOPATH/bin
export PATH=/usr/local/bin:$PATH
export PATH=$CHICKEN_BIN:$HOME/bin:$GOPATHS:$CABAL_BIN:$PATH
export PATH=$PATH:/Applications/Postgres.app/Contents/Versions/latest/bin
export DEBEMAIL=alex@blackkettle.org
export DEBFULLNAME="Alex Young"

cf-dev (){
  export CF_HOME=~/.cf/dev
  cf api api.cf.dev-paas.bskyb.com --skip-ssl-validation
  cf login
}

cf-stage (){
  export CF_HOME=~/.cf/stage
  cf api api.cf.stage-paas.bskyb.com --skip-ssl-validation
  cf login
}

cf-prod () {
  export CF_HOME=~/.cf/prod
  cf api api.cf.paas.bskyb.com --skip-ssl-validation
  cf login
}

#cf-prod


if [ -f /usr/local/share/chruby/chruby.sh ]; then
  source /usr/local/share/chruby/chruby.sh
fi

# OPAM configuration
. /home/zander/.opam/opam-init/init.sh > /dev/null 2> /dev/null || true

# NVM config
export NVM_DIR=~/.nvm
source $(brew --prefix nvm)/nvm.sh
